apiVersion: v1
kind: Secret
metadata:
  name: kps-alertmanager-external          # anything, but must match the Alert-manager volumeMount
  namespace: monitoring
  labels:
    app.kubernetes.io/instance: kps        # ‚Üê same Helm release name you already use
type: Opaque
stringData:
  alertmanager.yaml: |
    global:
      resolve_timeout: 2m

      # === Gmail SMTP settings ===
      smtp_smarthost: "smtp.gmail.com:587"
      smtp_from:      "AFDiaz2020@gmail.com"
      smtp_auth_username: "AFDiaz2020@gmail.com"
      smtp_auth_password: "<jbjpwqvaiadrpgqz>" 
      smtp_require_tls: true

    route:
      receiver: email-me
      group_wait:      15s
      group_interval:   1m
      repeat_interval:  4h

    receivers:
      - name: email-me
        email_configs:
          - to: "AFDiaz2020@gmail.com"      # where the alert will land
            send_resolved: true
